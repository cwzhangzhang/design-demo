<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>变更详情 - 变更风控</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#003eb3',
                        secondary: '#f0f5ff',
                    },
                    borderRadius: {
                        'sm': '4px',
                        'md': '8px',
                        'lg': '12px',
                        'xl': '16px',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap');
        body { font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; }
        .sidebar-transition { transition: width 0.3s ease-in-out; }
        .custom-gradient { background: linear-gradient(135deg, #003eb3 0%, #0050e3 100%); }
        .step-active { color: #003eb3; border-color: #003eb3; }
        .step-complete { background-color: #003eb3; border-color: #003eb3; color: white; }
        .step-item { cursor: pointer; transition: all 0.2s; }
        .step-item:hover { transform: translateY(-2px); }
        .step-item.selected .w-8 { box-shadow: 0 0 0 4px #dbeafe; }
        .step-item.selected span { text-decoration: underline; text-underline-offset: 4px; }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 overflow-hidden">
    <div class="flex h-screen">
        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar-transition w-64 bg-white border-r border-gray-200 flex flex-col z-30">
            <div class="p-6 flex items-center gap-3">
                <div class="w-8 h-8 custom-gradient rounded-lg flex items-center justify-center text-white">
                    <i data-lucide="shield-check" class="w-5 h-5"></i>
                </div>
                <span id="logo-text" class="font-bold text-lg tracking-tight">变更风控系统</span>
            </div>
            
            <nav class="flex-1 px-4 space-y-2 mt-4">
                <a href="index.html" class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                    <i data-lucide="list" class="w-5 h-5"></i>
                    <span class="nav-text">变更列表</span>
                </a>
                <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                    <i data-lucide="layout-dashboard" class="w-5 h-5"></i>
                    <span class="nav-text">仪表盘</span>
                </a>
                <a href="#" class="flex items-center gap-3 px-3 py-2 text-gray-600 hover:bg-gray-100 rounded-md transition-colors">
                    <i data-lucide="settings" class="w-5 h-5"></i>
                    <span class="nav-text">系统设置</span>
                </a>
            </nav>

            <div class="p-4 border-t border-gray-100">
                <button id="toggle-sidebar" class="flex items-center justify-center w-full p-2 hover:bg-gray-100 rounded-md text-gray-400">
                    <i data-lucide="chevron-left" id="toggle-icon" class="w-5 h-5"></i>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 flex flex-col min-w-0 overflow-hidden">
            <!-- Header -->
            <header class="h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 z-20">
                <div class="flex items-center gap-4">
                    <a href="index.html" class="p-2 hover:bg-gray-100 rounded-full text-gray-500">
                        <i data-lucide="arrow-left" class="w-5 h-5"></i>
                    </a>
                    <h1 class="text-xl font-semibold">变更详情</h1>
                </div>
            </header>

            <!-- Content Area -->
            <div class="flex-1 overflow-y-auto p-8 space-y-6">
                <!-- Basic Info Cards -->
                <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-2">
                        <div class="text-xs text-gray-400 font-medium">变更名称</div>
                        <div class="font-bold text-gray-800">北京机房核心交换机配置更新</div>
                        <div class="text-xs text-gray-400">ID: CHG-20260202-992</div>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-2">
                        <div class="text-xs text-gray-400 font-medium">变更状态 / 等级</div>
                        <div class="flex items-center gap-2">
                            <span class="px-2 py-1 bg-blue-50 text-blue-600 rounded text-xs font-bold">执行中</span>
                            <span class="px-2 py-1 bg-red-50 text-red-600 rounded text-xs font-bold">P0</span>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-2">
                        <div class="text-xs text-gray-400 font-medium">执行进度 (机器数量)</div>
                        <div class="text-lg font-bold">130 <span class="text-sm font-normal text-gray-400">/ 200</span></div>
                        <div class="w-full h-1.5 bg-gray-100 rounded-full overflow-hidden">
                            <div class="w-[65%] h-full bg-blue-500"></div>
                        </div>
                    </div>
                    <div class="bg-white p-6 rounded-xl border border-gray-200 shadow-sm space-y-2">
                        <div class="text-xs text-gray-400 font-medium">成功 / 失败</div>
                        <div class="flex items-center gap-4">
                            <div class="text-green-600 font-bold">128 <span class="text-[10px] font-normal text-gray-400 block">SUCCESS</span></div>
                            <div class="text-red-600 font-bold">2 <span class="text-[10px] font-normal text-gray-400 block">FAILED</span></div>
                        </div>
                    </div>
                </div>

                <!-- Execution Progress -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <div class="p-6 border-b border-gray-100 flex items-center justify-between">
                        <div class="flex items-center gap-4">
                            <h3 class="font-bold text-gray-800">总任务执行进度</h3>
                            <div class="flex items-center gap-2 ml-4">
                                <button id="btn-error" class="px-3 py-1.5 border border-red-200 text-red-600 rounded-md text-xs font-medium hover:bg-red-50 transition-colors">观测结果异常</button>
                                <button id="btn-success" class="px-3 py-1.5 bg-green-600 text-white rounded-md text-xs font-medium hover:bg-green-700 transition-colors">观测确认成功</button>
                            </div>
                        </div>
                        <button id="open-monitor" class="flex items-center gap-2 px-3 py-1.5 bg-secondary text-primary rounded-md text-xs font-medium hover:bg-blue-100 transition-colors">
                            <i data-lucide="bar-chart-3" class="w-4 h-4"></i>
                            变更观测监控
                        </button>
                    </div>
                    <div class="p-8">
                        <!-- Step Bar -->
                        <div class="flex items-center justify-between mb-12 relative" id="step-container">
                            <div class="absolute top-1/2 left-0 w-full h-0.5 bg-gray-100 -translate-y-1/2 z-0"></div>
                            <div id="step-progress-line" class="absolute top-1/2 left-0 w-2/3 h-0.5 bg-primary -translate-y-1/2 z-0 transition-all duration-500"></div>
                            
                            <div class="step-item relative z-10 flex flex-col items-center gap-2" data-step="1">
                                <div class="w-8 h-8 rounded-full border-2 bg-white flex items-center justify-center step-complete">
                                    <i data-lucide="check" class="w-4 h-4"></i>
                                </div>
                                <span class="text-xs font-bold text-primary">灰度阶段 I</span>
                            </div>
                            <div class="step-item relative z-10 flex flex-col items-center gap-2" data-step="2">
                                <div class="w-8 h-8 rounded-full border-2 bg-white flex items-center justify-center step-complete">
                                    <i data-lucide="check" class="w-4 h-4"></i>
                                </div>
                                <span class="text-xs font-bold text-primary">灰度阶段 II</span>
                            </div>
                            <div class="step-item relative z-10 flex flex-col items-center gap-2" data-step="3">
                                <div class="w-8 h-8 rounded-full border-2 bg-white flex items-center justify-center step-active">
                                    <div class="w-2 h-2 bg-primary rounded-full animate-ping"></div>
                                </div>
                                <span class="text-xs font-bold text-primary">灰度阶段 III</span>
                            </div>
                            <div class="step-item relative z-10 flex flex-col items-center gap-2" data-step="4">
                                <div class="w-8 h-8 rounded-full border-2 bg-white flex items-center justify-center border-gray-200 text-gray-300">
                                    <span class="text-xs">4</span>
                                </div>
                                <span class="text-xs font-bold text-gray-400">全量发布</span>
                            </div>
                        </div>

                        <!-- Progress Detail Table -->
                        <table class="w-full text-left text-sm">
                            <thead class="bg-gray-50 border-y border-gray-100">
                                <tr>
                                    <th class="px-4 py-3 font-semibold text-gray-600">阶段名称</th>
                                    <th class="px-4 py-3 font-semibold text-gray-600">阶段状态</th>
                                    <th class="px-4 py-3 font-semibold text-gray-600">机器灰度比例</th>
                                    <th class="px-4 py-3 font-semibold text-gray-600">机器数量</th>
                                    <th class="px-4 py-3 font-semibold text-gray-600">变更观测</th>
                                </tr>
                            </thead>
                            <tbody id="phase-detail-body" class="divide-y divide-gray-50">
                                <!-- Dynamic Content -->
                            </tbody>
                        </table>
                    </div>
                </div>

                <!-- Execution Report -->
                <div class="bg-white rounded-xl border border-gray-200 shadow-sm overflow-hidden">
                    <div class="p-6 border-b border-gray-100 flex items-center justify-between">
                        <h3 id="report-title" class="font-bold text-gray-800">执行报告 - 灰度阶段 III</h3>
                        <div class="flex gap-2">
                            <div class="relative">
                                <i data-lucide="search" class="w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"></i>
                                <input type="text" placeholder="搜索主机 IP" class="pl-9 pr-3 py-1.5 border border-gray-200 rounded-md text-xs focus:outline-none focus:ring-1 focus:ring-primary">
                            </div>
                            <button class="px-3 py-1.5 border border-gray-200 rounded-md text-xs flex items-center gap-1 hover:bg-gray-50">
                                <i data-lucide="filter" class="w-3 h-3"></i> 筛选状态
                            </button>
                        </div>
                    </div>
                    <table class="w-full text-left text-sm">
                        <thead class="bg-gray-50 border-b border-gray-100">
                            <tr>
                                <th class="px-6 py-4 font-semibold text-gray-600">主机 IP</th>
                                <th class="px-6 py-4 font-semibold text-gray-600">状态</th>
                                <th class="px-6 py-4 font-semibold text-gray-600">汇报时间</th>
                                <th class="px-6 py-4 font-semibold text-gray-600">日志详情</th>
                            </tr>
                        </thead>
                        <tbody id="execution-report-body" class="divide-y divide-gray-100">
                            <!-- Dynamic Content -->
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <!-- Drawer: Monitor -->
    <div id="drawer-overlay" class="fixed inset-0 bg-black/50 z-40 hidden opacity-0 transition-opacity duration-300"></div>
    <div id="drawer" class="fixed right-0 top-0 h-full w-[800px] bg-white z-50 transform translate-x-full transition-transform duration-300 shadow-2xl flex flex-col">
        <div class="p-6 border-b border-gray-100 flex items-center justify-between bg-white sticky top-0 z-10">
            <div>
                <h2 class="text-lg font-bold">变更观测监控</h2>
                <p class="text-xs text-gray-400">当前阶段：灰度阶段 III</p>
            </div>
            <button id="close-monitor" class="p-2 hover:bg-gray-100 rounded-full text-gray-400">
                <i data-lucide="x" class="w-5 h-5"></i>
            </button>
        </div>
        
        <div class="flex-1 overflow-y-auto p-8 space-y-8 bg-gray-50/30">
            <!-- Metrics Grid -->
            <div class="grid grid-cols-2 gap-6">
                <div class="bg-white p-6 rounded-xl border border-gray-100 shadow-sm">
                    <h4 class="text-sm font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="activity" class="w-4 h-4 text-blue-500"></i>
                        RDMA Latency (μs)
                    </h4>
                    <div id="chart-latency" class="w-full h-64"></div>
                </div>
                <div class="bg-white p-6 rounded-xl border border-gray-100 shadow-sm">
                    <h4 class="text-sm font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="zap" class="w-4 h-4 text-yellow-500"></i>
                        Packet Retransmission Rate
                    </h4>
                    <div id="chart-packet" class="w-full h-64"></div>
                </div>
                <div class="bg-white p-6 rounded-xl border border-gray-100 shadow-sm col-span-2">
                    <h4 class="text-sm font-bold text-gray-700 mb-4 flex items-center gap-2">
                        <i data-lucide="cpu" class="w-4 h-4 text-green-500"></i>
                        Agent CPU & Memory Usage
                    </h4>
                    <div id="chart-resource" class="w-full h-64"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Toast Container -->
    <div id="toast-container" class="fixed top-6 right-6 z-[100] flex flex-col gap-3"></div>

    <script>
        // Initialize Lucide Icons
        lucide.createIcons();

        // Toast Notification Function
        const showToast = (type, message) => {
            const container = document.getElementById('toast-container');
            const toast = document.createElement('div');
            const bgColor = type === 'success' ? 'bg-green-500' : 'bg-red-500';
            const icon = type === 'success' ? 'check-circle' : 'alert-circle';
            
            toast.className = `${bgColor} text-white px-6 py-3 rounded-lg shadow-xl flex items-center gap-3 transform translate-x-full transition-all duration-300 opacity-0`;
            toast.innerHTML = `
                <i data-lucide="${icon}" class="w-5 h-5"></i>
                <span class="text-sm font-medium">${message}</span>
            `;
            
            container.appendChild(toast);
            lucide.createIcons({ props: { className: 'w-5 h-5' }, target: toast });
            
            setTimeout(() => {
                toast.classList.remove('translate-x-full', 'opacity-0');
            }, 10);
            
            setTimeout(() => {
                toast.classList.add('translate-x-full', 'opacity-0');
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        };

        // Progress Interaction Logic
        let currentStep = 3;
        let selectedStep = 3;
        const totalSteps = 4;
        
        const phaseMockData = {
            1: {
                name: '灰度阶段 I',
                status: '已成功',
                ratio: '10%',
                count: 20,
                reports: [
                    { ip: '10.128.0.1', status: 'SUCCESS', time: '2026-02-02 10:05:12' },
                    { ip: '10.128.0.2', status: 'SUCCESS', time: '2026-02-02 10:06:45' },
                    { ip: '10.128.0.3', status: 'SUCCESS', time: '2026-02-02 10:07:22' }
                ]
            },
            2: {
                name: '灰度阶段 II',
                status: '已成功',
                ratio: '20%',
                count: 40,
                reports: [
                    { ip: '10.128.1.15', status: 'SUCCESS', time: '2026-02-02 10:45:00' },
                    { ip: '10.128.1.18', status: 'SUCCESS', time: '2026-02-02 10:46:30' },
                    { ip: '10.128.1.22', status: 'SUCCESS', time: '2026-02-02 10:48:12' }
                ]
            },
            3: {
                name: '灰度阶段 III',
                status: '执行中',
                ratio: '30%',
                count: 60,
                reports: [
                    { ip: '10.128.0.42', status: 'SUCCESS', time: '2026-02-02 11:24:05' },
                    { ip: '10.128.0.45', status: 'FAILED', time: '2026-02-02 11:25:12' },
                    { ip: '10.128.0.48', status: 'PENDING', time: '-' }
                ]
            },
            4: {
                name: '全量发布',
                status: '待执行',
                ratio: '100%',
                count: 200,
                reports: []
            }
        };

        const btnSuccess = document.getElementById('btn-success');
        const btnError = document.getElementById('btn-error');
        const progressLine = document.getElementById('step-progress-line');
        const stepItems = document.querySelectorAll('.step-item');
        const phaseDetailBody = document.getElementById('phase-detail-body');
        const reportBody = document.getElementById('execution-report-body');
        const reportTitle = document.getElementById('report-title');

        const renderPhaseDetail = (step) => {
            const data = phaseMockData[step];
            const statusColor = data.status === '已成功' ? 'green' : (data.status === '执行中' ? 'blue' : 'gray');
            const icon = data.status === '已成功' ? 'check-circle-2' : (data.status === '执行中' ? 'loader-2' : 'circle');
            const spin = data.status === '执行中' ? 'animate-spin' : '';

            phaseDetailBody.innerHTML = `
                <tr>
                    <td class="px-4 py-4 font-medium ${data.status === '执行中' ? 'text-primary' : ''}">${data.name}</td>
                    <td class="px-4 py-4">
                        <span class="text-${statusColor}-600 flex items-center gap-1">
                            <i data-lucide="${icon}" class="w-4 h-4 ${spin}"></i> 
                            ${data.status}
                        </span>
                    </td>
                    <td class="px-4 py-4">${data.ratio}</td>
                    <td class="px-4 py-4">${data.count}</td>
                    <td class="px-4 py-4 text-primary cursor-pointer hover:underline">
                        ${data.status === '待执行' ? '-' : (data.status === '执行中' ? '观测中...' : '查看指标')}
                    </td>
                </tr>
            `;
            lucide.createIcons({ target: phaseDetailBody });
        };

        const renderExecutionReport = (step) => {
            const data = phaseMockData[step];
            reportTitle.textContent = `执行报告 - ${data.name}`;
            
            if (data.reports.length === 0) {
                reportBody.innerHTML = '<tr><td colspan="4" class="px-6 py-12 text-center text-gray-400">暂无执行数据</td></tr>';
                return;
            }

            reportBody.innerHTML = data.reports.map(report => `
                <tr>
                    <td class="px-6 py-4 font-mono text-xs">${report.ip}</td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-0.5 bg-${report.status === 'SUCCESS' ? 'green' : (report.status === 'FAILED' ? 'red' : 'gray')}-50 text-${report.status === 'SUCCESS' ? 'green' : (report.status === 'FAILED' ? 'red' : 'gray')}-600 rounded text-[10px] font-bold">
                            ${report.status}
                        </span>
                    </td>
                    <td class="px-6 py-4 text-gray-400 text-xs">${report.time}</td>
                    <td class="px-6 py-4 text-primary hover:underline cursor-pointer text-xs">View Log</td>
                </tr>
            `).join('');
        };

        const updateProgressUI = () => {
            stepItems.forEach((item, index) => {
                const stepNum = index + 1;
                const circle = item.querySelector('div');
                const label = item.querySelector('span');
                
                // Set selection state
                if (stepNum === selectedStep) {
                    item.classList.add('selected');
                } else {
                    item.classList.remove('selected');
                }

                if (stepNum < currentStep) {
                    // Completed
                    circle.className = 'w-8 h-8 rounded-full border-2 bg-white flex items-center justify-center step-complete';
                    circle.innerHTML = '<i data-lucide="check" class="w-4 h-4"></i>';
                    label.className = 'text-xs font-bold text-primary';
                } else if (stepNum === currentStep) {
                    // Active
                    circle.className = 'w-8 h-8 rounded-full border-2 bg-white flex items-center justify-center step-active';
                    circle.innerHTML = '<div class="w-2 h-2 bg-primary rounded-full animate-ping"></div>';
                    label.className = 'text-xs font-bold text-primary';
                } else {
                    // Pending
                    circle.className = 'w-8 h-8 rounded-full border-2 bg-white flex items-center justify-center border-gray-200 text-gray-300';
                    circle.innerHTML = `<span class="text-xs">${stepNum}</span>`;
                    label.className = 'text-xs font-bold text-gray-400';
                }
            });
            
            // Update Line (always based on current execution step)
            const progressPercent = ((currentStep - 1) / (totalSteps - 1)) * 100;
            progressLine.style.width = `${progressPercent}%`;
            
            renderPhaseDetail(selectedStep);
            renderExecutionReport(selectedStep);
            lucide.createIcons();
        };

        // Add Click Events to Step Items
        stepItems.forEach(item => {
            item.addEventListener('click', () => {
                selectedStep = parseInt(item.getAttribute('data-step'));
                updateProgressUI();
            });
        });

        btnSuccess.addEventListener('click', () => {
            if (currentStep < totalSteps) {
                // Update Mock Data
                phaseMockData[currentStep].status = '已成功';
                
                currentStep++;
                selectedStep = currentStep; // Auto switch to next step view
                
                // Mock next step status
                phaseMockData[currentStep].status = '执行中';
                phaseMockData[currentStep].reports = [
                    { ip: '10.128.5.1', status: 'SUCCESS', time: new Date().toLocaleString() },
                    { ip: '10.128.5.2', status: 'PENDING', time: '-' }
                ];

                updateProgressUI();
                showToast('success', `确认成功！已进入：${phaseMockData[currentStep].name}`);
            } else {
                phaseMockData[currentStep].status = '已成功';
                updateProgressUI();
                showToast('success', '变更任务已全部完成！');
                btnSuccess.disabled = true;
                btnSuccess.classList.add('opacity-50', 'cursor-not-allowed');
            }
        });

        btnError.addEventListener('click', () => {
            showToast('error', '观测结果异常！已中止当前进度并通知相关人员。');
            phaseMockData[currentStep].status = '异常中止';
            const activeStepItem = document.querySelector(`.step-item[data-step="${currentStep}"] div`);
            activeStepItem.classList.remove('step-active');
            activeStepItem.classList.add('bg-red-50', 'border-red-500', 'text-red-500');
            activeStepItem.innerHTML = '<i data-lucide="alert-circle" class="w-4 h-4"></i>';
            lucide.createIcons();
        });

        // Initial Render
        updateProgressUI();

        // Sidebar Toggle
        const sidebar = document.getElementById('sidebar');
        const toggleBtn = document.getElementById('toggle-sidebar');
        const toggleIcon = document.getElementById('toggle-icon');
        const logoText = document.getElementById('logo-text');
        const navTexts = document.querySelectorAll('.nav-text');
        let isCollapsed = false;

        toggleBtn.addEventListener('click', () => {
            isCollapsed = !isCollapsed;
            sidebar.style.width = isCollapsed ? '80px' : '256px';
            logoText.style.display = isCollapsed ? 'none' : 'block';
            navTexts.forEach(t => t.style.display = isCollapsed ? 'none' : 'block');
            toggleIcon.style.transform = isCollapsed ? 'rotate(180deg)' : 'rotate(0deg)';
        });

        // Monitor Drawer Logic
        const drawer = document.getElementById('drawer');
        const overlay = document.getElementById('drawer-overlay');
        const openBtn = document.getElementById('open-monitor');
        const closeBtn = document.getElementById('close-monitor');

        const toggleDrawer = (open) => {
            if (open) {
                overlay.classList.remove('hidden');
                setTimeout(() => {
                    overlay.classList.add('opacity-100');
                    drawer.classList.remove('translate-x-full');
                    renderCharts(); // Render charts when drawer opens
                }, 10);
            } else {
                overlay.classList.remove('opacity-100');
                drawer.classList.add('translate-x-full');
                setTimeout(() => overlay.classList.add('hidden'), 300);
            }
        };

        openBtn.addEventListener('click', () => toggleDrawer(true));
        closeBtn.addEventListener('click', () => toggleDrawer(false));
        overlay.addEventListener('click', () => toggleDrawer(false));

        // ApexCharts Configuration
        function renderCharts() {
            // Latency Chart
            const latencyOptions = {
                series: [{ name: 'Latency', data: [12, 14, 13, 15, 18, 17, 16, 15, 14, 13] }],
                chart: { type: 'area', height: 250, toolbar: { show: false }, zoom: { enabled: false } },
                colors: ['#003eb3'],
                stroke: { curve: 'smooth', width: 2 },
                fill: { type: 'gradient', gradient: { shadeIntensity: 1, opacityFrom: 0.4, opacityTo: 0.1 } },
                xaxis: { categories: ['10:00', '10:10', '10:20', '10:30', '10:40', '10:50', '11:00', '11:10', '11:20', '11:30'] },
                grid: { borderColor: '#f1f1f1' }
            };
            new ApexCharts(document.querySelector("#chart-latency"), latencyOptions).render();

            // Packet Rate Chart
            const packetOptions = {
                series: [{ name: 'Retransmit %', data: [0.01, 0.02, 0.01, 0.05, 0.04, 0.02, 0.01, 0.01, 0.02, 0.01] }],
                chart: { type: 'bar', height: 250, toolbar: { show: false } },
                colors: ['#eab308'],
                plotOptions: { bar: { borderRadius: 4, columnWidth: '60%' } },
                xaxis: { categories: ['10:00', '10:10', '10:20', '10:30', '10:40', '10:50', '11:00', '11:10', '11:20', '11:30'] }
            };
            new ApexCharts(document.querySelector("#chart-packet"), packetOptions).render();

            // Resource Chart
            const resourceOptions = {
                series: [
                    { name: 'CPU %', data: [45, 52, 48, 61, 58, 55, 50, 48, 45, 42] },
                    { name: 'Mem %', data: [30, 32, 31, 35, 34, 33, 32, 31, 30, 30] }
                ],
                chart: { type: 'line', height: 250, toolbar: { show: false } },
                colors: ['#22c55e', '#3b82f6'],
                stroke: { width: [3, 3], dashArray: [0, 8] },
                xaxis: { categories: ['10:00', '10:10', '10:20', '10:30', '10:40', '10:50', '11:00', '11:10', '11:20', '11:30'] }
            };
            new ApexCharts(document.querySelector("#chart-resource"), resourceOptions).render();
        }
    </script>
</body>
</html>
