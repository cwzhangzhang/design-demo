# 任务描述
开发一个将markdown格式的产品功能结构思维导图转为产品功能描述的网页应用，核心功能为：把用户上传的markdown格式产品功能思维导图，转为详细的功能描述文档，后台调用大模型 API 对产品功能描述思维导图的内容进行理解，并输出mmarkdown格式的产品功能描述。

## 产品功能描述及交互要求
### 首页
全局侧边栏 (Global Sidebar)：左侧常驻，支持收起。
    - 顶部为`新建对话`高亮按钮；点击`新建对话`开启新的对话。
    - 底部`设置`按钮可以进入设置页面。
沉浸式输入区 (Hero Input Section)：页面中心大面积留白。
1. 首页包含一个文件上传组件、输入组件、大模型选择组件和“生成”按钮。
- 文件上传组件允许用户上传markdown格式的产品功能结构思维导图。
- 输入组件允许用户输入对功能描述的要求或者产品功能结构思维导图的描述。
- 下方为“生成”按钮。
- 用户必须上传文件，输入组件为可选。
- 大模型选择组件允许用户选择在`设置`中维护的大模型，默认选择默认大模型。


2. 用户点击`生成`按钮后，系统读取用户上传的markdown文件内容，将文件内容和用户输入作为user_prompt连通预设的 system_prompt，发送到大模型 API 对产品功能描述思维导图的内容进行理解，并输出markdown格式的产品功能描述。user_prompt 使用如下方式拼接：

"""
产品功能结构思维导图：\n<content>$file_content</content>
用户输入：\n<content>$user_input</content>
"""


###  运行页
用户点击`生成`按钮后进入运行页，页面采用了经典的三栏式布局，从左到右依次为：
- 左侧：全局侧边栏，默认收起。顶部为“新建对话”高亮按钮；底部`设置`按钮可以进入设置页面。
- 中间：对话交互区 
    - 功能：
        - 展示用户输入指令和 AI 的简短回复、思考过程展示。使用折叠面板展示思考过程，已经完成的思考过程可以收起。
        - 底部有输入框区域，可以对生成的结果提优化要求。
        - 有停止按钮，能够停止当前任务。

- 右侧：沉浸式编辑器/预览区 (Editor/Canvas)
    - 功能：展示 AI 生成的长文档。这是一个类似 Notion 的文档编辑界面。顶部有简单的工具栏（复制、下载）。
        - 流式输出大模型生成的内容，支持实时显示
        - 如果需要生成的内容比较多，超出大模型的最大token上限，展示`继续生成`按钮，进行继续生成，直到输入文档的全部内容都转换完成为止。


### 设置 
设置功能包括大模型设置和系统提示词设置。
1. 大模型设置
- 可以添加多个大模型，支持配置默认大模型。
- 新建大模型配置时，需要输入以下信息： Base_url、Model_Name 、API_KEY，存储在本地浏览器。
- 保存大模型时需要检查大模型的连通性，即调用大模型 API 对一个简单的 prompt 进行调用，检查是否返回正确的结果。
- 支持配置默认的大模型，用户可以在`设置`中选择默认大模型。
- 支持配置大模型在首页的大模型选择组件中显示的顺序。
2. 系统提示词配置
- 默认使用`prompts/将Markdown格式思维导图转换为产品功能描述文档（PRD）系统提示词.md`中内容作为系统提示词。
- 系统提示词配置页面包含一个markdown格式的编辑器，用户可以在文本编辑器中输入自定义的系统提示词。点击“保存”按钮后生效。
- 支持一键还原默认系统提示词。



## 技术栈要求
**技术栈要求**：React + TypeScript + Tailwind + shadcn-ui 
**视觉风格**：极简主义
**交互要求**：
1. 使用Toast 组件，在用户点击“保存”时弹出成功提示。
2. 使用**Lucide React**图标库
